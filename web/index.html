<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Plan: Arabic Verb Conjugation API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Kufi+Arabic:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The SPA is structured into three main sections, mirroring the three development phases in the source report. This thematic, tab-based navigation (Phase 1, Phase 2, Phase 3) was chosen because it provides the most intuitive user flow, allowing a user to directly experience the plan's progression. Each section contains an interactive simulator that demonstrates the core logic of that phase, along with dynamic displays of the corresponding API request/response formats. This structure turns the abstract plan into a tangible, explorable tool, enhancing comprehension and engagement. -->
    <!-- Visualization & Content Choices: Report Info: Conjugation rules and API structures for past, present, and irregular verbs. -> Goal: Inform, Organize, Interact. -> Viz/Presentation Method: Interactive forms for user input (root letters), HTML tables for displaying conjugation results, and styled <pre><code> blocks for showing dynamic JSON data. -> Interaction: Users input root letters and click a button to trigger a JavaScript simulation of the backend logic. For Phase 3, a dropdown simplifies the complex rules into selectable examples. -> Justification: This approach avoids abstract visualizations like charts, which are unsuitable for this content. Instead, it directly simulates the API's function, providing a clear, hands-on understanding of the plan's technical details. -> Library/Method: Vanilla JavaScript for all logic, Tailwind CSS for styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .arabic-text {
             font-family: 'Noto Kufi Arabic', sans-serif;
        }
        .tab-active {
            border-color: #A0522D;
            background-color: #F5EFE6;
            color: #A0522D;
            font-weight: 600;
        }
        .tab-inactive {
            border-color: transparent;
            color: #6B7280;
        }
        .btn-primary {
            background-color: #A0522D;
            color: #FFFFFF;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #8B4513;
        }
        input[type="text"], select {
            text-align: center;
            font-size: 1.5rem;
            border-color: #D1D5DB;
        }
        code {
            direction: ltr;
            text-align: left;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #F5EFE6;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-[#A0522D]">Interactive API Plan</h1>
            <p class="text-lg text-gray-600 mt-2">A simulator for Arabic verb conjugation based on the development plan.</p>
        </header>

        <nav class="flex justify-center border-b border-gray-200 mb-8">
            <button data-tab="phase1" class="tab-btn tab-active text-lg py-3 px-6 border-b-2 focus:outline-none">Phase 1: Past Tense</button>
            <button data-tab="phase2" class="tab-btn tab-inactive text-lg py-3 px-6 border-b-2 focus:outline-none">Phase 2: Present Tense</button>
            <button data-tab="phase3" class="tab-btn tab-inactive text-lg py-3 px-6 border-b-2 focus:outline-none">Phase 3: Irregular Verbs</button>
        </nav>

        <main>
            <div id="phase1" class="tab-content">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">Regular Past Tense Conjugation</h2>
                    <p class="text-gray-600 mt-1 max-w-2xl mx-auto">This phase aims to create an endpoint that conjugates any sound, three-letter verb in the past tense. Enter the three root letters below to simulate this functionality.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Enter 3-Letter Root</h3>
                        <div class="flex justify-center gap-3 mb-4" dir="rtl">
                            <input type="text" id="p1-r3" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                            <input type="text" id="p1-r2" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                            <input type="text" id="p1-r1" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                        </div>
                        <button id="p1-conjugate-btn" class="w-full py-3 rounded-lg btn-primary font-semibold">Conjugate</button>
                    </div>
                    <div class="lg:col-span-2 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Conjugation Table</h3>
                        <div id="p1-output-table" class="overflow-x-auto">
                            <p class="text-center text-gray-500">The conjugation table will appear here.</p>
                        </div>
                    </div>
                    <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="card p-6">
                            <h3 class="text-xl font-semibold mb-4">Request Body (JSON)</h3>
                            <pre class="bg-gray-100 p-4 rounded-lg"><code id="p1-request-json"></code></pre>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-xl font-semibold mb-4">Success Response (JSON)</h3>
                            <pre class="bg-gray-100 p-4 rounded-lg h-96 overflow-y-auto"><code id="p1-response-json"></code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div id="phase2" class="tab-content hidden">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">Regular Present Tense Conjugation</h2>
                    <p class="text-gray-600 mt-1 max-w-2xl mx-auto">This phase expands to include present tense conjugation, which involves prefixes and suffixes. This simulator assumes the middle root vowel is a fatha (e.g., يَفعَلُ).</p>
                </div>
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Enter 3-Letter Root</h3>
                        <div class="flex justify-center gap-3 mb-4" dir="rtl">
                            <input type="text" id="p2-r3" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                            <input type="text" id="p2-r2" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                            <input type="text" id="p2-r1" maxlength="1" class="w-16 h-16 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] arabic-text">
                        </div>
                        <button id="p2-conjugate-btn" class="w-full py-3 rounded-lg btn-primary font-semibold">Conjugate</button>
                    </div>
                    <div class="lg:col-span-2 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Conjugation Table</h3>
                        <div id="p2-output-table" class="overflow-x-auto">
                           <p class="text-center text-gray-500">The conjugation table will appear here.</p>
                        </div>
                    </div>
                    <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="card p-6">
                            <h3 class="text-xl font-semibold mb-4">Request Body (JSON)</h3>
                            <pre class="bg-gray-100 p-4 rounded-lg"><code id="p2-request-json"></code></pre>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-xl font-semibold mb-4">Success Response (JSON)</h3>
                            <pre class="bg-gray-100 p-4 rounded-lg h-96 overflow-y-auto"><code id="p2-response-json"></code></pre>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="phase3" class="tab-content hidden">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">Handling Irregular Verbs</h2>
                    <p class="text-gray-600 mt-1 max-w-2xl mx-auto">This is the most complex phase, requiring transformational rules instead of simple concatenation. Select an irregular verb type to see an example of its rule and conjugation.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-1 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Select Verb Type</h3>
                         <select id="p3-verb-type" class="w-full p-3 rounded-lg border-2 focus:ring-2 focus:ring-[#A0522D] focus:border-[#A0522D] text-center text-base">
                            <option value="hollow">Hollow (e.g., قال)</option>
                            <option value="weak-final">Weak-Final (e.g., دعا)</option>
                            <option value="weak-initial">Weak-Initial (e.g., وقف)</option>
                            <option value="doubled">Doubled (e.g., مدّ)</option>
                        </select>
                        <div class="mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                            <h4 class="font-semibold text-gray-800">Root Used:</h4>
                            <p id="p3-root-display" class="text-center text-2xl font-bold my-2 arabic-text"></p>
                            <h4 class="font-semibold text-gray-800">Applied Rule:</h4>
                            <p id="p3-rule-display" class="text-sm text-gray-700 mt-1"></p>
                        </div>
                    </div>
                    <div class="lg:col-span-2 card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-center">Conjugation Table (Past Tense)</h3>
                        <div id="p3-output-table" class="overflow-x-auto">
                            <p class="text-center text-gray-500">Select a verb type to display its conjugation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => {
                        t.classList.remove('tab-active');
                        t.classList.add('tab-inactive');
                    });
                    tab.classList.add('tab-active');
                    tab.classList.remove('tab-inactive');

                    contents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(tab.dataset.tab).classList.remove('hidden');
                });
            });

            const PRONOUNS = [
                { en: 'He', ar: 'هو', past_suffix: 'َ', present_prefix: 'يَ', present_suffix: 'ُ' },
                { en: 'They (dual, m)', ar: 'هما (م)', past_suffix: 'َا', present_prefix: 'يَ', present_suffix: 'َانِ' },
                { en: 'They (m. pl)', ar: 'هم', past_suffix: 'ُوا', present_prefix: 'يَ', present_suffix: 'ُونَ' },
                { en: 'She', ar: 'هي', past_suffix: 'َتْ', present_prefix: 'تَ', present_suffix: 'ُ' },
                { en: 'They (dual, f)', ar: 'هما (مؤ)', past_suffix: 'َتَا', present_prefix: 'تَ', present_suffix: 'َانِ' },
                { en: 'They (f. pl)', ar: 'هنّ', past_suffix: 'ْنَ', present_prefix: 'يَ', present_suffix: 'ْنَ' },
                { en: 'You (m)', ar: 'أنتَ', past_suffix: 'ْتَ', present_prefix: 'تَ', present_suffix: 'ُ' },
                { en: 'You (dual, m)', ar: 'أنتما', past_suffix: 'ْتُمَا', present_prefix: 'تَ', present_suffix: 'َانِ' },
                { en: 'You (m. pl)', ar: 'أنتم', past_suffix: 'ْتُمْ', present_prefix: 'تَ', present_suffix: 'ُونَ' },
                { en: 'You (f)', ar: 'أنتِ', past_suffix: 'ْتِ', present_prefix: 'تَ', present_suffix: 'ِينَ' },
                { en: 'You (dual, f)', ar: 'أنتما', past_suffix: 'ْتُمَا', present_prefix: 'تَ', present_suffix: 'َانِ' },
                { en: 'You (f. pl)', ar: 'أنتنّ', past_suffix: 'ْتُنَّ', present_prefix: 'تَ', present_suffix: 'ْنَ' },
                { en: 'I', ar: 'أنا', past_suffix: 'ْتُ', present_prefix: 'أَ', present_suffix: 'ُ' },
                { en: 'We', ar: 'نحن', past_suffix: 'ْنَا', present_prefix: 'نَ', present_suffix: 'ُ' }
            ];

            const createTableHTML = (conjugations) => {
                let html = '<table class="w-full text-center border-collapse"><thead><tr class="border-b-2 border-gray-200"><th class="p-2 font-semibold">Pronoun</th><th class="p-2 font-semibold">Verb</th></tr></thead><tbody>';
                conjugations.forEach(c => {
                    html += `<tr class="border-b border-gray-100"><td class="p-2">${c.pronoun}</td><td class="p-2 font-semibold text-lg text-[#A0522D] arabic-text" dir="rtl">${c.verb}</td></tr>`;
                });
                html += '</tbody></table>';
                return html;
            };

            const formatJSON = (obj) => JSON.stringify(obj, null, 2);

            const setupPhase1 = () => {
                const r1 = document.getElementById('p1-r1');
                const r2 = document.getElementById('p1-r2');
                const r3 = document.getElementById('p1-r3');
                const btn = document.getElementById('p1-conjugate-btn');
                const outputTable = document.getElementById('p1-output-table');
                const requestJsonEl = document.getElementById('p1-request-json');
                const responseJsonEl = document.getElementById('p1-response-json');

                const conjugate = () => {
                    const root = [r1.value, r2.value, r3.value];
                    if (root.some(l => !l)) {
                        alert('Please enter all three root letters.');
                        return;
                    }

                    const conjugations = PRONOUNS.map(p => {
                        const base = root[0] + 'َ' + root[1] + 'ْ';
                        let verb = base + root[2] + p.past_suffix;
                        if (p.en === 'He' || p.en === 'She' || p.en.startsWith('They (dual') || p.en === 'They (m. pl)') {
                            verb = root[0] + 'َ' + root[1] + 'َ' + root[2] + p.past_suffix;
                        }
                        return { pronoun: p.en, verb };
                    });
                    
                    const responseConjugations = PRONOUNS.map(p => {
                        const base = root[0] + 'َ' + root[1] + 'ْ';
                        let verb = base + root[2] + p.past_suffix;
                         if (p.en === 'He' || p.en === 'She' || p.en.startsWith('They (dual') || p.en === 'They (m. pl)') {
                            verb = root[0] + 'َ' + root[1] + 'َ' + root[2] + p.past_suffix;
                        }
                        return { pronoun: p.ar, verb };
                    });

                    outputTable.innerHTML = createTableHTML(conjugations);
                    
                    const request = { root };
                    const response = { root, tense: "past", conjugations: responseConjugations };
                    requestJsonEl.textContent = formatJSON(request);
                    responseJsonEl.textContent = formatJSON(response);
                };

                btn.addEventListener('click', conjugate);
                [r1,r2,r3].forEach(input => input.addEventListener('input', () => {
                    requestJsonEl.textContent = formatJSON({ root: [r1.value, r2.value, r3.value] });
                    responseJsonEl.textContent = '';
                }));
            };

            const setupPhase2 = () => {
                const r1 = document.getElementById('p2-r1');
                const r2 = document.getElementById('p2-r2');
                const r3 = document.getElementById('p2-r3');
                const btn = document.getElementById('p2-conjugate-btn');
                const outputTable = document.getElementById('p2-output-table');
                const requestJsonEl = document.getElementById('p2-request-json');
                const responseJsonEl = document.getElementById('p2-response-json');

                const conjugate = () => {
                    const root = [r1.value, r2.value, r3.value];
                    if (root.some(l => !l)) {
                        alert('Please enter all three root letters.');
                        return;
                    }

                    const conjugations = PRONOUNS.map(p => {
                        const verb = p.present_prefix + root[0] + 'ْ' + root[1] + 'َ' + root[2] + p.present_suffix;
                        return { pronoun: p.en, verb };
                    });

                    const responseConjugations = PRONOUNS.map(p => {
                        const verb = p.present_prefix + root[0] + 'ْ' + root[1] + 'َ' + root[2] + p.present_suffix;
                        return { pronoun: p.ar, verb };
                    });

                    outputTable.innerHTML = createTableHTML(conjugations);
                    
                    const request = { root };
                    const response = { root, tense: "present", conjugations: responseConjugations };
                    requestJsonEl.textContent = formatJSON(request);
                    responseJsonEl.textContent = formatJSON(response);
                };

                btn.addEventListener('click', conjugate);
                [r1,r2,r3].forEach(input => input.addEventListener('input', () => {
                    requestJsonEl.textContent = formatJSON({ root: [r1.value, r2.value, r3.value] });
                    responseJsonEl.textContent = '';
                }));
            };

            const setupPhase3 = () => {
                const select = document.getElementById('p3-verb-type');
                const rootDisplay = document.getElementById('p3-root-display');
                const ruleDisplay = document.getElementById('p3-rule-display');
                const outputTable = document.getElementById('p3-output-table');
                
                const irregularData = {
                    'hollow': {
                        root: ['ق', 'و', 'ل'],
                        rule: "Hollow Verb (e.g. قال): The middle weak letter (و) is dropped when it connects to a pronoun with a vowel (like the تاء of the subject) to prevent two silent letters from meeting.",
                        conjugations: [
                            { en: 'He', verb: 'قَالَ' },
                            { en: 'They (dual, m)', verb: 'قَالَا' },
                            { en: 'They (m. pl)', verb: 'قَالُوا' },
                            { en: 'She', verb: 'قَالَتْ' },
                            { en: 'They (dual, f)', verb: 'قَالَتَا' },
                            { en: 'They (f. pl)', verb: 'قُلْنَ' },
                            { en: 'You (m)', verb: 'قُلْتَ' },
                            { en: 'You (dual, m)', verb: 'قُلْتُمَا' },
                            { en: 'You (m. pl)', verb: 'قُلْتُمْ' },
                            { en: 'You (f)', verb: 'قُلْتِ' },
                            { en: 'You (dual, f)', verb: 'قُلْتُمَا' },
                            { en: 'You (f. pl)', verb: 'قُلْتُنَّ' },
                            { en: 'I', verb: 'قُلْتُ' },
                            { en: 'We', verb: 'قُلْنَا' }
                        ]
                    },
                    'weak-final': {
                        root: ['د', 'ع', 'و'],
                        rule: "Weak-Final Verb (e.g. دعا): The weak letter (و) returns to its origin when attached to the plural 'waw' and is then dropped, with a fatha placed on the preceding letter.",
                        conjugations: [
                            { en: 'He', verb: 'دَعَا' },
                            { en: 'They (dual, m)', verb: 'دَعَوَا' },
                            { en: 'They (m. pl)', verb: 'دَعَوْا' },
                            { en: 'She', verb: 'دَعَتْ' },
                            { en: 'They (dual, f)', verb: 'دَعَتَا' },
                            { en: 'They (f. pl)', verb: 'دَعَوْنَ' },
                            { en: 'You (m)', verb: 'دَعَوْتَ' },
                            { en: 'You (dual, m)', verb: 'دَعَوْتُمَا' },
                            { en: 'You (m. pl)', verb: 'دَعَوْتُمْ' },
                            { en: 'You (f)', verb: 'دَعَوْتِ' },
                            { en: 'You (dual, f)', verb: 'دَعَوْتُمَا' },
                            { en: 'You (f. pl)', verb: 'دَعَوْتُنَّ' },
                            { en: 'I', verb: 'دَعَوْتُ' },
                            { en: 'We', verb: 'دَعَوْنَا' }
                        ]
                    },
                    'weak-initial': {
                        root: ['و', 'ق', 'ف'],
                        rule: "Weak-Initial Verb (e.g. وقف): There is no significant change in the past tense conjugation; it behaves like a regular, sound verb.",
                         conjugations: [
                            { en: 'He', verb: 'وَقَفَ' },
                            { en: 'They (dual, m)', verb: 'وَقَفَا' },
                            { en: 'They (m. pl)', verb: 'وَقَفُوا' },
                            { en: 'She', verb: 'وَقَفَتْ' },
                            { en: 'They (dual, f)', verb: 'وَقَفَتَا' },
                            { en: 'They (f. pl)', verb: 'وَقَفْنَ' },
                            { en: 'You (m)', verb: 'وَقَفْتَ' },
                            { en: 'You (dual, m)', verb: 'وَقَفْتُمَا' },
                            { en: 'You (m. pl)', verb: 'وَقَفْتُمْ' },
                            { en: 'You (f)', verb: 'وَقَفْتِ' },
                            { en: 'You (dual, f)', verb: 'وَقَفْتُمَا' },
                            { en: 'You (f. pl)', verb: 'وَقَفْتُنَّ' },
                            { en: 'I', verb: 'وَقَفْتُ' },
                            { en: 'We', verb: 'وَقَفْنَا' }
                        ]
                    },
                    'doubled': {
                        root: ['م', 'د', 'د'],
                        rule: "Doubled Verb (e.g. مدّ): The doubled letter is separated when the verb is attached to pronouns of a moving subject (like تاء الفاعل, نا الفاعلين, نون النسوة).",
                        conjugations: [
                            { en: 'He', verb: 'مَدَّ' },
                            { en: 'They (dual, m)', verb: 'مَدَّا' },
                            { en: 'They (m. pl)', verb: 'مَدُّوا' },
                            { en: 'She', verb: 'مَدَّتْ' },
                            { en: 'They (dual, f)', verb: 'مَدَّتَا' },
                            { en: 'They (f. pl)', verb: 'مَدَدْنَ' },
                            { en: 'You (m)', verb: 'مَدَدْتَ' },
                            { en: 'You (dual, m)', verb: 'مَدَدْتُمَا' },
                            { en: 'You (m. pl)', verb: 'مَدَدْتُمْ' },
                            { en: 'You (f)', verb: 'مَدَدْتِ' },
                            { en: 'You (dual, f)', verb: 'مَدَدْتُمَا' },
                            { en: 'You (f. pl)', verb: 'مَدَدْتُنَّ' },
                            { en: 'I', verb: 'مَدَدْتُ' },
                            { en: 'We', verb: 'مَدَدْنَا' }
                        ]
                    }
                };
                
                const updateDisplay = () => {
                    const type = select.value;
                    const data = irregularData[type];
                    rootDisplay.textContent = `[ ${data.root.join(', ')} ]`;
                    ruleDisplay.textContent = data.rule;
                    const tableData = data.conjugations.map(c => ({ pronoun: c.en, verb: c.verb }));
                    outputTable.innerHTML = createTableHTML(tableData);
                };

                select.addEventListener('change', updateDisplay);
                updateDisplay();
            };

            setupPhase1();
            setupPhase2();
            setupPhase3();
        });
    </script>
</body>
</html>
